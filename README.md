# Tinder
## 1. Сервис для знакомств

### целевая аудитория 
|Распределение аудитории |
|------------------------|
|Северная Америка        |
|Европа                  |

* 75 миллионов активных пользователей в месяц
* 1.6 млрд свайпов в день
* более 30 млн совпадений в день

### MVP
* Профиль пользователя
* Персональная лента рекомендаций
* Система свайпов
* Чаты совпавших пользователей

## 2. Расчет нагрузки
### Продуктовые метрики
|                                            |                        |
|--------------------------------------------|------------------------|         
|Месячная аудитория                          | 37 млн.                |
|Дневная аудитория (35% от месячной)         | 13 млн.                |
|Среднее время использования сервиса в день  | 20 минут               |	
|Кол-во свайпов в день                       | 0.8 млрд.              |
|Количество мэтчей в день                    | 10 млн.                |

|Средний размер хранилища пользователя       |                        |
|--------------------------------------------|------------------------|
| Фото в профиле (в среднем 3 шт.)           | 500 Кбайт (1.5Мбайт)   |
| Сообщения пользователя                     | 1 Мбайт                |
| Описание профиля и др. контент             | 0.5 Мбайт              |
| Итого                                      | 3 Мбайт                |

### Технические метрики


| Размер хранения в разбивке по типам данных (в Тб)|                        |
|--------------------------------------------------|------------------------|
| Фото                                             | 60 Тб                  |
| Текст                                            | 20 Тб                  |

#### Сетевой трафик
* Пиковое потребление в теченнии суток (в Гбит/с):\
количество пользователей составляет 6.5 млн.(50% суточного кол-ва), пиковое время использования сервиса 21:00-22:00
Примем,что время использования сервиса в этом интервале 10 мин, тогда для 6.5 млн пользователей - 1.1 млн одновременных сессий при равномерном распределении времени использования сервиса\

`Статика - 500 КБ * 1.1е6 / 60 ≈ 70 Гбит/сек`
`Изображения - 3 МБ * 1.1e6 / 60 ≈ 429 Гбит/сек`

* Суммарный суточный (Гбайт/сутки):\
 за сутки в среднем 13 млн. пользователей, 20 мин используется сервис\

`Статика - 500 КБ * 20 * 13e6 ≈ 130 000 Гбайт/сутки`
`Изображения - 3 МБ * 20 * 13e6 ≈ 780 000 Гбайт/сутки`

#### RPS в разбивке по типам запросов

* Свайп:\
`800e6 / (24 * 60 * 60) ≈ 9260 RPS`
* Фото:\
грузятся при каждом свайпе, при среднем кол-ва фото у пользователя - 3\
`800e6 * 3 / (24 * 60 * 60) ≈ 27777 RPS`
* Мэтчи:\
Новый мэтч\
`10e6 / (24 * 60 * 60) ≈ 115 RPS`

Получать список мэтчей необходимо один раз за одну сессию пользователя\
`13e6 / (24 * 60 * 60) ≈ 150 RPS`

* Чаты:\
Пусть 80% совпавших пользователей начинают общение в чате -  8 млн.\
`8e6 / (24 * 60 * 60)` ≈ 92 RPS`

Получать список чатов необходимо один раз за одну сессию пользователя\
`13e6 / (24 * 60 * 60) ≈ 150 RPS`

* Профиль:\
пусть информацию в своем профиле изменяет 1% активных пользователей - 130 тыс.\
регистрируется 100 тыс. новых пользователей\
`230e3 / (24 * 60 * 60) ≈ 3 RPS`


##### Итог 
Всего: 37407 RPS


|--------|---------------|
|Свайп   | 9260 RPS      |
|Фото    | 27777 RPS     |
|Мэтчи   | 265 RPS       |
|Чаты    | 242 RPS       |
|Профиль | 3 RPS         |
|Итого   | 37407 RPS     |
 
